@using Bayada.Joy.Messaging.Application.Dtos;
@using Bayada.Joy.Messaging.Application.Services;
<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>Other Scorecard</title>
    <link
      href="https://fonts.googleapis.com/css2?family=Inter:wght@100;200;300;400;500;600;700;800;900&display=swap"
      rel="stylesheet"
    />
    <style>
      body {
        margin: 0;
        padding: 0;
        font-family: "Inter", sans-serif;
        background: #f3f3f3;
      }

      .card {
        background: white;
        margin: 20px;
        padding: 20px;
        border-radius: 12px;
        box-shadow: 0 4px 8px rgba(0, 0, 0, 0.08);
        max-width: 92%;
        margin-left: auto;
        margin-right: auto;
      }

      .card-header {
        display: flex;
        justify-content: space-between;
        align-items: center;
        flex-wrap: wrap;
      }

      .card-header h2 {
        margin: 0;
        font-size: 20px;
        font-weight: 600;
        color: #333;
      }

      .status {
        background: #00c9a7;
        color: white;
        padding: 4px 10px;
        border-radius: 12px;
        font-size: 12px;
        font-weight: 500;
      }

      .card-details {
        margin-top: 16px;
        font-size: 14px;
        color: #555;
      }

      .info-group {
        margin: 8px 0;
      }

      .icon {
        margin-right: 6px;
      }

      .chip {
        display: inline-block;
        background: #d9eaff;
        color: #004085;
        border-radius: 50%;
        width: 22px;
        height: 22px;
        text-align: center;
        line-height: 22px;
        font-weight: bold;
        font-size: 12px;
        margin: 0 6px;
      }

      .author {
        color: #0062cc;
      }

      /* Icebreakers section */
      .section-title {
        font-weight: bold;
        font-size: 18px;
        margin-bottom: 10px;
        color: #222;
      }

      .question-label {
        font-weight: 500;
        margin-bottom: 10px;
        display: block;
        font-size: 14px;
      }

      .toggle-buttons {
        display: block;
        margin-bottom: 16px;
      }

      .toggle-button {
        display: inline-block;
        width: auto;
        min-width: 80px;
        padding: 6px 14px;
        border-radius: 20px;
        border: 1px solid #ccc;
        background: #f5f5f5;
        cursor: default;
        font-size: 14px;
        margin-right: 10px;
        text-align: center;
        vertical-align: middle;
      }

      .toggle-button.selected {
        background: #e6f9f6;
        border-color: darkgreen;
        font-weight: bold;
      }

      .textarea-group {
        background: #f4f4f4;
        padding: 14px;
        border-radius: 10px;
        margin-bottom: 16px;
      }

      .textarea-group.alt-bg {
        background: #f6f8fb;
      }

      .textarea-group label {
        font-size: 14px;
        font-weight: 600;
        display: block;
        color: #888;
        margin-bottom: 6px;
      }

      .textarea-content {
        font-size: 14px;
        color: #555;
        min-height: 20px;
        white-space: pre-wrap;
        word-break: break-word;
      }

      .placeholder {
        color: #aaa;
      }

      .license-table {
        width: 100%;
        border-collapse: collapse;
        margin-top: 12px;
        font-size: 14px;
      }

      .license-table th,
      .license-table td {
        padding: 6px 10px;
        text-align: left;
        border-bottom: 1px solid #ccc;
      }

      .license-table th {
        background-color: #f0f0f0;
        font-weight: bold;
        color: #444;
      }

      .soft-divider {
        height: 1px;
        background-color: #e0e4ea;
        box-shadow: 0 1px 1px rgba(0, 0, 0, 0.03);
        margin: 20px 0;
      }

      .section {
        margin-bottom: 20px;
      }

      .icon-row {
        width: 100%;
        table-layout: fixed;
        margin-bottom: 16px;
      }

      .item {
        vertical-align: top;
        padding-right: 24px;
        width: 33%;
      }

      .item .icon {
        font-size: 20px;
        margin-right: 6px;
        float: left;
      }

      .label {
        font-weight: 600;
        font-size: 14px;
        color: #444;
      }

      .value {
        font-size: 14px;
        color: #666;
      }

      .opportunities-box {
        background: #f1f3f7;
        border-radius: 12px;
        padding: 12px 16px;
        margin-top: 8px;
      }

      .opportunities-box .subsection {
        margin-top: 8px;
      }

      .opportunities-box .label {
        font-weight: 600;
        font-size: 13px;
      }

      .opportunities-box .value.muted {
        font-size: 13px;
        color: #888;
      }

      .sub-section-title {
        font-weight: 600;
        font-size: 15px;
        margin-bottom: 8px;
      }

      .tag {
        display: inline-block;
        background: #e4eaf0;
        color: #333;
        font-size: 13px;
        padding: 4px 10px;
        border-radius: 8px;
        margin-right: 8px;
        margin-top: 4px;
      }

      .muted {
        color: #888;
      }

      .icon {
        font-size: 16px;
      }

      .availability-table {
        width: 100%;
        border-collapse: collapse;
        margin-bottom: 16px;
      }

      .day-cell-wrapper {
        width: 50px;
        vertical-align: top;
        padding-top: 4px;
      }

      .day-cell {
        width: 28px;
        height: 28px;
        background-color: #007b8f;
        color: white;
        font-weight: bold;
        text-align: center;
        line-height: 28px;
        border-radius: 50%;
        font-size: 13px;
        margin-top: 2px;
      }

      .slot-line {
        font-size: 14px;
        color: #444;
        margin-bottom: 4px;
      }

      .experience-tags,
      .skill-tags {
        display: flex;
        flex-wrap: wrap;
        gap: 8px;
        margin-bottom: 12px;
      }

      .experience-time .label {
        font-size: 14px;
        font-weight: 500;
        margin-bottom: 2px;
      }

      .experience-time .value {
        font-size: 14px;
        color: #444;
        margin-bottom: 12px;
      }

      .bayada-way .question {
        font-weight: 500;
        margin-bottom: 12px;
      }

      .radio-group {
        display: table;
        width: 100%;
        margin-bottom: 16px;
      }

      .proficiency-tags {
        display: flex;
        gap: 8px;
        margin-bottom: 16px;
        flex-wrap: wrap;
      }

      .proficiency-tags .tag {
        background-color: #f1f3f5;
        color: #333;
        font-size: 13px;
        padding: 6px 12px;
        border-radius: 999px;
      }

      .proficiency-tags .tag.selected {
        background-color: #00b0a6;
        color: white;
        font-weight: 600;
      }

      .proficiency-tags .tag svg {
        vertical-align: middle;
        position: relative;
        top: -1.75px;
        margin-right: 6px;
      }

      .evaluation-box {
        background-color: #f1f3f5;
        padding: 16px;
        border-radius: 12px;
        margin-bottom: 8px;
      }

      .eval-label {
        font-weight: 600;
        margin-bottom: 6px;
        font-size: 15px;
      }

      .eval-placeholder {
        font-size: 14px;
        color: #6b7280;
        margin: 0;
      }

      .character-limit {
        font-size: 13px;
        color: #555;
      }

      .accordion-section {
        margin-bottom: 12px;
      }

      .accordion-title {
        font-weight: 600;
        font-size: 15px;
        margin-bottom: 8px;
        display: flex;
        align-items: center;
        gap: 6px;
      }

      .question-group {
        border-collapse: collapse;
        width: 100%;
        font-size: 14px;
        margin-left: 6px;
      }

      .question-group td {
        vertical-align: top;
        padding-bottom: 10px;
      }

      .checkbox-cell {
        width: 24px;
        padding-right: 8px;
      }

      input[type="checkbox"] {
        appearance: none;
        -webkit-appearance: none;
        width: 18px;
        height: 18px;
        border: 2px solid #555;
        border-radius: 2px;
        display: inline-block;
        position: relative;
        margin: 0;
        cursor: pointer;
     }

     input[type="checkbox"]:checked::before {
        content: "✓";
        position: absolute;
        top: -2px;
        left: 2px;
        font-size: 18px;
        font-weight: bold;
        color: #007b8f;
     }

      .compensation-table {
        background-color: #f1f3f5;
        border-radius: 12px;
        padding: 12px 16px;
        max-width: fit-content;
        border-collapse: separate;
        border-spacing: 16px 0;
      }

      .compensation-table td {
        font-size: 14px;
        vertical-align: middle;
      }

      .compensation-amount {
        font-weight: 500;
        color: #111;
      }

      .compensation-type {
        color: #444;
      }

      .rating-recommendation {
        background-color: #e6f4ff;
        padding: 20px;
        border-radius: 16px;
        margin-top: 32px;
        font-family: "Inter", sans-serif;
        color: #222;
      }

      .field-row {
        display: flex;
        gap: 24px;
        flex-wrap: wrap;
        margin-bottom: 20px;
      }

      .field {
        flex: 1;
        min-width: 220px;
      }

      .field label {
        display: block;
        font-weight: 600;
        font-size: 14px;
        margin-bottom: 6px;
        color: #444;
      }

      .field .tag {
        background: #fff;
        border-radius: 12px;
        padding: 6px 12px;
        font-size: 13px;
        display: inline-block;
        color: #333;
        box-shadow: inset 0 0 0 1px #ccc;
      }

      .summary-text {
        background-color: #fff;
        padding: 12px 16px;
        border-radius: 12px;
        margin-top: 8px;
      }

      .summary-label {
        font-size: 13px;
        color: #666;
        margin-bottom: 6px;
      }

      .summary-content {
        font-size: 14px;
        margin: 0;
        color: #222;
      }

      .required::after {
        content: "*";
        color: red;
        margin-left: 4px;
      }

      .csm-field {
        transform: translateX(-100px);
      }

      .csm-field .dropdown-placeholder {
        max-width: 140px;
        width: 100%;
      }

      .page-break-avoid {
        page-break-inside: avoid;
        break-inside: avoid;
      }
    </style>
  </head>
  <body>
    <!---------------------------------------- Header ---------------------------------------->
    @{
        var candidateName = Model.CandidateClinicalScorecards.CandidateName ?? "";
        var employeeName = Model.CandidateClinicalScorecards.CandidateName ?? "";;
        var candidateInitials = string.Join("", candidateName
            .Split(new[] { ' ' }, StringSplitOptions.RemoveEmptyEntries)
            .Take(2)
            .Select(n => n[0]))
            .ToUpper();
        var employeeInitials = string.Join("", employeeName
            .Split(new[] { ' ' }, StringSplitOptions.RemoveEmptyEntries)
            .Take(2)
            .Select(n => n[0]))
            .ToUpper();
    }

    <div class="card">
      <div class="card-header">
        <h2>Other Scorecards | @Model.CandidateClinicalScorecards.JobTitle</h2>
        <span class="status">Submitted</span>
      </div>
      <div class="card-details">
        <div class="info-group">
          <span class="icon">✎</span> Other Interview
          <span class="icon" style="margin-left: 1rem"><svg xmlns="http://www.w3.org/2000/svg" width="14" height="14" fill="currentColor" viewBox="0 0 24 24">
            <path d="M12 2a10 10 0 1 0 10 10A10.011 10.011 0 0 0 12 2Zm6.93 6h-3.26a13.9 13.9 0 0 0-1.18-3.3A8.06 8.06 0 0 1 18.93 8ZM12 4.07A11.776 11.776 0 0 1 13.72 8h-3.44A11.776 11.776 0 0 1 12 4.07ZM8.51 4.7A13.9 13.9 0 0 0 7.33 8H4.07a8.06 8.06 0 0 1 4.44-3.3ZM4.07 10h3.56a15.276 15.276 0 0 0 0 4H4.07a8.031 8.031 0 0 1 0-4Zm.86 6h3.26a13.9 13.9 0 0 0 1.18 3.3A8.06 8.06 0 0 1 4.93 16Zm7.07 3.93A11.776 11.776 0 0 1 10.28 16h3.44A11.776 11.776 0 0 1 12 19.93ZM15.49 19.3A13.9 13.9 0 0 0 16.67 16h3.26a8.06 8.06 0 0 1-4.44 3.3ZM16.37 14H7.63a13.2 13.2 0 0 1 0-4h8.74a13.2 13.2 0 0 1 0 4Zm.0-6a13.9 13.9 0 0 0-1.18-3.3A8.06 8.06 0 0 1 18.93 8Z"/>
          </svg></span>
          @Model.CandidateClinicalScorecards.InterviewLanguage
          <span class="icon" style="margin-left: 1rem"><svg xmlns="http://www.w3.org/2000/svg" width="14" height="14" fill="currentColor" viewBox="0 0 24 24">
            <path d="M19 4h-1V2h-2v2H8V2H6v2H5a2 2 0 0 0-2 
                     2v14a2 2 0 0 0 2 2h14a2 2 0 0 
                     0 2-2V6a2 2 0 0 0-2-2Zm0 16H5V10h14v10Zm0-12H5V6h14v2Z"/>
          </svg></span>
          @Model.CandidateClinicalScorecards.ScheduledDate |
          @Model.CandidateClinicalScorecards.FormattedStartTime -
          @Model.CandidateClinicalScorecards.FormattedEndTime  (@Model.CandidateClinicalScorecards.Timezone)
        </div>
        <div class="info-group">
          <strong>Candidate:</strong>
          <span class="chip">@candidateInitials</span>
          @Model.CandidateClinicalScorecards.CandidateName &nbsp;&nbsp;
          <strong>Author:</strong>
          <span class="chip">@employeeInitials</span>
          <span class="author">@Model.CandidateClinicalScorecards.EmployeeName</span>
          &nbsp;&nbsp;
          <span>Created: @Model.CandidateClinicalScorecards.CreatedDateTime</span> |
          <span>Updated: @Model.CandidateClinicalScorecards.UpdatedDateTime</span>
        </div>
      </div>
    </div>

    <!------------------------------ Rating Recommendation -------------------------------->

    <div class="rating-recommendation page-break-avoid">
      <div class="section-title">Rating &amp; Recommendation</div>

      <div class="field-row">
        <div class="field">
          <label><span class="icon">
              <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="black">
                <path d="M3 21V3h18v18H3zm2-2h2v-2H5v2zm0-4h2v-2H5v2zm0-4h2V9H5v2zm0-4h2V5H5v2zm4 12h2v-2H9v2zm0-4h2v-2H9v2zm0-4h2V9H9v2zm0-4h2V5H9v2zm4 12h2v-2h-2v2zm0-4h2v-2h-2v2zm0-4h2V9h-2v2zm0-4h2V5h-2v2zm4 12h2v-2h-2v2zm0-4h2v-2h-2v2zm0-4h2V9h-2v2zm0-4h2V5h-2v2z"/>
              </svg></span> Offices</label>
          <div class="tag">@Model.CandidateClinicalScorecards.RatingAndRecommendation.OfficeName</div>
        </div>
        <div class="field csm-field" style="margin-top:10px;">
          <label><span class="icon">
              <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="white" stroke="black" stroke-width="2">
                <circle cx="12" cy="8" r="4" />
                <path d="M4 20c0-4 4-6 8-6s8 2 8 6" />
              </svg></span> CSM assignment</label>
          <div class="tag">@Model.CandidateClinicalScorecards.RatingAndRecommendation.CsmName</div>
        </div>
      </div>

      <div class="field">
        <label class="required"><span class="icon">
            <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="white" stroke="black" stroke-width="2">
                <path d="M12 20h9" />
                <path d="M16.5 3.5a2.121 2.121 0 0 1 3 3L7 19l-4 1 1-4L16.5 3.5z" />
            </svg></span> Recruiter summary</label>
        @{
          var ratingAndRecommendation = Model.CandidateClinicalScorecards.RatingAndRecommendation?.Rating;
        }
        <div class="proficiency-tags">
          <span class="tag @(ratingAndRecommendation == 1 ? "selected" : "")">
              <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="none" stroke="black" stroke-width="1.8" viewBox="0 0 24 24">
                <circle cx="12" cy="12" r="10" />
                <path d="M9 10h.01M15 10h.01M8 16c1.5-1 6.5-1 8 0" />
              </svg>
              Do not recommend
          </span>

        <span class="tag @(ratingAndRecommendation == 2 ? "selected" : "")">
          <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="none" stroke="black" stroke-width="1.8" viewBox="0 0 24 24">
            <circle cx="12" cy="12" r="10" />
            <path d="M9 10h.01M15 10h.01M8 16h8" />
          </svg>
          Tentatively recommend
        </span>

        <span class="tag @(ratingAndRecommendation == 3 ? "selected" : "")">
          <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="none" stroke="black" stroke-width="1.8" viewBox="0 0 24 24">
            <circle cx="12" cy="12" r="10" />
            <path d="M9 10h.01M15 10h.01M8 15s1.5 2 4 2 4-2 4-2" />
          </svg>
          Recommend
        </span>

        <span class="tag @(ratingAndRecommendation == 4 ? "selected" : "")">
          <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="none" stroke="black" stroke-width="1.8" viewBox="0 0 24 24">
            <circle cx="12" cy="12" r="10" />
            <path d="M9 10h.01M15 10h.01M8 14c1 2 7 2 8 0" />
          </svg>
          Highly Recommend
        </span>
        </div>
        <div class="summary-text">
          <p class="summary-label">
            What did you think? Evaluate this candidate’s skills,
            qualifications, and potential fit for BAYADA.
          </p>
          <p class="summary-content">@Model.CandidateClinicalScorecards.RatingAndRecommendation.EvaluationNotes</p>
        </div>
      </div>
    </div>

    <div class="soft-divider"></div>
  </body>
</html>